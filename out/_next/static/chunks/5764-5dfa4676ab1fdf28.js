"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5764],{5328:(e,t,s)=>{s.d(t,{G:()=>l,N:()=>n});let r=s(5125).A.create({baseURL:"https://ssunbae-api.vercel.app",timeout:15e3});async function n(){try{let e=await r.get("/api/verbs");if(e.data&&Array.isArray(e.data.verbs))return e.data.verbs;throw Error("Invalid API response structure")}catch(e){throw console.error("Failed to fetch verbs: ".concat(e.message)),e}}async function l(){try{return(await r.get("/api/kanji")).data}catch(e){throw console.error("Failed to fetch kanji: ".concat(e.message)),e}}},9437:(e,t,s)=>{s.d(t,{A:()=>c});var r=s(5155),n=s(2115),l=s(2171),a=s(8456),i=s(8298);let o=e=>{if(!e)return null;let t=e.match(/[a-zA-Z][^a-zA-Z]*/g);if(!t)return null;let s={x:0,y:0},r=null;for(let e=0;e<t.length;e++){let n=t[e],l=n[0],a=(n.slice(1).match(/-?[\d.]+/g)||[]).map(parseFloat);if(a.some(isNaN))continue;let i=l===l.toLowerCase(),o=l.toUpperCase();if(0===e&&"M"===o){r={...s={x:a[0],y:a[1]}};for(let e=2;e<a.length;e+=2)i?(s.x+=a[e],s.y+=a[e+1]):(s.x=a[e],s.y=a[e+1])}else{let e=0;if("C"===o)e=6;else if("L"===o||"T"===o)e=2;else if("H"===o||"V"===o)e=1;else if("S"===o||"Q"===o)e=4;else if("A"===o)e=7;else if("Z"===o)continue;for(let t=0;t<a.length;t+=e){let r=a.slice(t,t+e),n=s.x,l=s.y;"H"===o?n=i?n+r[0]:r[0]:"V"===o?l=i?l+r[0]:r[0]:e>0&&(n=i?n+r[e-2]:r[e-2],l=i?l+r[e-1]:r[e-1]),s={x:n,y:l}}}}return r?{start:r,end:s}:null};function c(e){var t,s;let{kanji:c,onClose:u,onNext:d,onPrev:h,onShuffle:x,onReset:f}=e,[m,y]=(0,n.useState)(!0),[j,g]=(0,n.useState)([]),[p,k]=(0,n.useState)(0),[v,w]=(0,n.useState)(!0),[b,N]=(0,n.useState)(null),[S,A]=(0,n.useState)(!1),[C,L]=(0,n.useState)(""),[M,z]=(0,n.useState)(0),[T,$]=(0,n.useState)([]),D=(0,n.useRef)(null);(0,n.useEffect)(()=>{(async()=>{if(w(!0),N(null),z(0),$([]),g([]),k(0),!c){N("한자 정보가 없습니다."),w(!1);return}let e=c.trim()[0].charCodeAt(0).toString(16).padStart(5,"0");try{let t=await fetch("https://raw.githubusercontent.com/KanjiVG/kanjivg/master/kanji/".concat(e,".svg"));if(!t.ok)throw Error("HTTP ".concat(t.status));let s=await t.text(),r=new DOMParser().parseFromString(s,"image/svg+xml"),n=Array.from(r.querySelectorAll("path")).map(e=>e.getAttribute("d")||"");g(n),k(n.length)}catch(e){console.error("Failed to fetch KanjiVG data:",e),N("획순 데이터를 가져올 수 없습니다.")}finally{w(!1)}})()},[c]);let E=e=>{let t=D.current;if(!t)return null;let s="touches"in e?e.touches[0].clientX:e.clientX,r="touches"in e?e.touches[0].clientY:e.clientY,n=t.createSVGPoint();n.x=s,n.y=r;let l=t.getScreenCTM();if(l){let e=l.inverse();return n.matrixTransform(e)}return null},F=!v&&M>=p&&p>0,V=e=>{if(e.preventDefault(),F||v||!j[M])return;let t=E(e);if(!t)return;let s=o(j[M]);s&&20>Math.hypot(t.x-s.start.x,t.y-s.start.y)&&(A(!0),L("M ".concat(t.x," ").concat(t.y)))},W=e=>{if(e.preventDefault(),!S)return;let t=E(e);t&&L(e=>"".concat(e," L ").concat(t.x," ").concat(t.y))},G=()=>{if(!S)return;if(A(!1),!j[M]||!C)return void L("");let e=o(j[M]),t=o(C);e&&t&&20>Math.hypot(t.end.x-e.end.x,t.end.y-e.end.y)&&($(e=>[...e,M]),z(e=>e+1)),L("")};return(0,r.jsxs)("div",{className:"w-full h-full flex flex-col items-center gap-2 p-4 bg-card/95 rounded-lg",children:[(0,r.jsxs)("header",{className:"flex items-center justify-between w-full",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium",children:["한자 쓰기: ",c]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>y(!m),className:(0,a.cn)("transition-colors",m?"bg-primary/10":""),children:m?"힌트 끄기":"힌트 보기"}),(0,r.jsx)(l.$,{variant:"ghost",size:"sm",onClick:u,children:"닫기"})]})]}),(0,r.jsx)("main",{className:"relative w-full aspect-square max-w-md border-2 border-border rounded-lg bg-background touch-none",children:(0,r.jsxs)("svg",{ref:D,className:"absolute inset-0 w-full h-full",viewBox:"0 0 ".concat(109," ").concat(109),onMouseDown:V,onMouseMove:W,onMouseUp:G,onMouseLeave:G,onTouchStart:V,onTouchMove:W,onTouchEnd:G,children:[(0,r.jsx)("defs",{children:(0,r.jsxs)("g",{id:"grid-lines",style:{stroke:"#e2e8f0",strokeWidth:"0.5"},children:[(0,r.jsx)("line",{x1:54.5,y1:"0",x2:54.5,y2:109}),(0,r.jsx)("line",{x1:"0",y1:54.5,x2:109,y2:54.5}),(0,r.jsx)("line",{x1:"0",y1:"0",x2:109,y2:109,style:{strokeDasharray:"2 2"}}),(0,r.jsx)("line",{x1:109,y1:"0",x2:"0",y2:109,style:{strokeDasharray:"2 2"}})]})}),(0,r.jsx)("use",{href:"#grid-lines"}),m&&(0,r.jsx)("g",{style:{stroke:"#cbd5e1",opacity:.7,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},children:j.map((e,t)=>(0,r.jsx)("path",{d:e},"bg-".concat(t)))}),(0,r.jsx)("g",{style:{stroke:"#475569",strokeWidth:"3.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"},children:T.map(e=>(0,r.jsx)("path",{d:j[e]},"drawn-".concat(e)))}),m&&!F&&j[M]&&(0,r.jsxs)("g",{children:[(0,r.jsx)("path",{d:j[M],stroke:"#2563eb",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",style:{opacity:.4}}),(0,r.jsx)("circle",{cx:null==(t=o(j[M]))?void 0:t.start.x,cy:null==(s=o(j[M]))?void 0:s.start.y,r:"3",fill:"#2563eb"})]}),C&&(0,r.jsx)("path",{d:C,style:{stroke:"black",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",fill:"none"}}),v&&(0,r.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",children:"로딩 중..."}),b&&(0,r.jsx)("text",{x:"50%",y:"50%",textAnchor:"middle",dy:".3em",fill:"red",children:b}),F&&(0,r.jsxs)("g",{className:"pointer-events-none",children:[(0,r.jsx)("rect",{width:"100%",height:"100%",fill:"rgba(255, 255, 255, 0.8)",className:"animate-in fade-in duration-500"}),(0,r.jsx)("foreignObject",{x:"0",y:"0",width:"100%",height:"100%",children:(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)(i.A,{className:"w-16 h-16 text-green-500 animate-in fade-in zoom-in-50 duration-700"})})})]})]})}),(0,r.jsxs)("footer",{className:"flex flex-col items-center justify-center w-full mt-2 gap-2",children:[(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-2 w-full max-w-xs",children:[(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:h,children:"이전"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:d,children:"다음"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:x,children:"섞기"}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:f,children:"리셋"})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between w-full max-w-xs",children:[(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:[M," / ",p," 획"]}),(0,r.jsx)(l.$,{variant:"outline",size:"sm",onClick:()=>{$([]),z(0)},className:"text-destructive",children:"지우기"})]})]})]})}}}]);