"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{5314:(e,t,n)=>{n.d(t,{A:()=>c});var s=n(5155),l=n(2115),r=n(2171),i=n(8456),a=n(5917);function c(e){let{word:t,expectedStrokes:n,onClose:c,onNext:o,onPrev:u,onShuffle:d,onReset:h}=e,[f,m]=(0,l.useState)(!1),[x,p]=(0,l.useState)([]),[g,w]=(0,l.useState)([]),[v,k]=(0,l.useState)(!0),[b,y]=(0,l.useState)(!1),S=(0,l.useRef)(null),j=(0,l.useRef)(null),N=document.documentElement.classList.contains("dark"),T=N?"#ffffff":"#000000";(0,l.useEffect)(()=>{let e=S.current;if(!e)return;e.width=300,e.height=300;let t=e.getContext("2d");t&&(t.lineCap="round",t.strokeStyle=T,t.lineWidth=4,j.current=t,C(t))},[T]);let C=e=>{e.strokeStyle=N?"#374151":"#e2e8f0",e.lineWidth=1,e.beginPath(),e.moveTo(150,0),e.lineTo(150,300),e.moveTo(0,150),e.lineTo(300,150),e.stroke(),e.setLineDash([5,5]),e.beginPath(),e.moveTo(0,0),e.lineTo(300,300),e.moveTo(300,0),e.lineTo(0,300),e.stroke(),e.setLineDash([])},E=()=>{let e=S.current,n=j.current;e&&n&&(n.save(),n.globalAlpha=.25*!!v,n.font='120px "Noto Sans KR", sans-serif',n.fillStyle=N?"#6b7280":"#94a3b8",n.textAlign="center",n.textBaseline="middle",n.fillText(t,150,150),n.restore())},R=()=>{let e=j.current;e&&(p([]),w([]),y(!1),e.clearRect(0,0,300,300),C(e),E())};(0,l.useEffect)(()=>{R()},[t]),(0,l.useEffect)(()=>{let e=S.current,t=j.current;e&&t&&(t.clearRect(0,0,300,300),C(t),E(),t.strokeStyle=T,t.lineWidth=4,x.forEach(e=>{let n=JSON.parse(e);t.beginPath(),n.forEach((e,n)=>{0===n?t.moveTo(e.x,e.y):t.lineTo(e.x,e.y)}),t.stroke()}))},[v,x,t,T,N]);let D=e=>{let t=S.current;if(!t)return null;let n=t.getBoundingClientRect(),s="touches"in e?e.touches[0].clientX:e.clientX,l="touches"in e?e.touches[0].clientY:e.clientY,r=t.width/n.width,i=t.height/n.height;return{x:(s-n.left)*r,y:(l-n.top)*i}},M=e=>{e.preventDefault();let t=D(e);if(!t)return;m(!0),w([t]);let n=j.current;n&&(n.beginPath(),n.moveTo(t.x,t.y))},z=e=>{if(e.preventDefault(),!f)return;let t=D(e);if(!t)return;w(e=>[...e,t]);let n=j.current;n&&(n.strokeStyle=T,n.lineWidth=4,n.lineTo(t.x,t.y),n.stroke())},A=()=>{if(f)if(m(!1),g.length>0&&p(e=>[...e,JSON.stringify(g)]),w([]),n){let e=Math.max(1,n-1),t=n+1;x.length>=e&&x.length<=t&&setTimeout(()=>y(!0),500)}else{let e=3*t.length;x.length>=e-1&&setTimeout(()=>y(!0),500)}};return(0,s.jsxs)("div",{className:"w-full flex flex-col items-center gap-4 p-4 bg-card/95 rounded-lg",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between w-full max-w-md",children:[(0,s.jsxs)("h3",{className:"text-lg font-medium",children:["한국어 쓰기: ",t]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:()=>k(!v),className:(0,i.cn)("transition-colors",v?"bg-primary/10":""),children:v?"힌트 끄기":"힌트 보기"}),(0,s.jsx)(r.$,{variant:"ghost",size:"sm",onClick:c,children:"닫기"})]})]}),(0,s.jsxs)("main",{className:"relative w-full aspect-square max-w-md border-2 border-border rounded-lg bg-background touch-none",children:[(0,s.jsx)("canvas",{ref:S,className:"w-full h-full",style:{touchAction:"none"},onMouseDown:M,onMouseMove:z,onMouseUp:A,onMouseLeave:A,onTouchStart:M,onTouchMove:z,onTouchEnd:A}),b&&(0,s.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-white/80 dark:bg-black/80 animate-in fade-in duration-500 pointer-events-none",children:(0,s.jsx)(a.A,{className:"w-16 h-16 text-green-500 animate-in zoom-in-50 duration-700"})})]}),(0,s.jsxs)("footer",{className:"flex flex-col items-center justify-center w-full max-w-md gap-2",children:[(0,s.jsxs)("div",{className:"grid grid-cols-4 gap-2 w-full",children:[(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:u,children:"이전"}),(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:o,children:"다음"}),(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:d,children:"섞기"}),(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:h,children:"리셋"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["획 수: ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:x.length}),n&&(0,s.jsxs)("span",{className:"ml-2 text-xs",children:["(목표: ",n,"획)"]})]}),(0,s.jsx)(r.$,{variant:"outline",size:"sm",onClick:R,className:"text-destructive",children:"지우기"})]})]})]})}},5917:(e,t,n)=>{n.d(t,{A:()=>s});let s=(0,n(1847).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},7120:(e,t,n)=>{n.d(t,{d:()=>S});var s=n(5155),l=n(2115),r=n(2556),i=n(4446),a=n(3468),c=n(3558),o=n(8108),u=n(4288),d=n(7602),h="Switch",[f,m]=(0,a.A)(h),[x,p]=f(h),g=l.forwardRef((e,t)=>{let{__scopeSwitch:n,name:a,checked:o,defaultChecked:u,required:f,disabled:m,value:p="on",onCheckedChange:g,form:w,...v}=e,[y,S]=l.useState(null),j=(0,i.s)(t,e=>S(e)),N=l.useRef(!1),T=!y||w||!!y.closest("form"),[C,E]=(0,c.i)({prop:o,defaultProp:null!=u&&u,onChange:g,caller:h});return(0,s.jsxs)(x,{scope:n,checked:C,disabled:m,children:[(0,s.jsx)(d.sG.button,{type:"button",role:"switch","aria-checked":C,"aria-required":f,"data-state":b(C),"data-disabled":m?"":void 0,disabled:m,value:p,...v,ref:j,onClick:(0,r.mK)(e.onClick,e=>{E(e=>!e),T&&(N.current=e.isPropagationStopped(),N.current||e.stopPropagation())})}),T&&(0,s.jsx)(k,{control:y,bubbles:!N.current,name:a,value:p,checked:C,required:f,disabled:m,form:w,style:{transform:"translateX(-100%)"}})]})});g.displayName=h;var w="SwitchThumb",v=l.forwardRef((e,t)=>{let{__scopeSwitch:n,...l}=e,r=p(w,n);return(0,s.jsx)(d.sG.span,{"data-state":b(r.checked),"data-disabled":r.disabled?"":void 0,...l,ref:t})});v.displayName=w;var k=l.forwardRef((e,t)=>{let{__scopeSwitch:n,control:r,checked:a,bubbles:c=!0,...d}=e,h=l.useRef(null),f=(0,i.s)(h,t),m=(0,o.Z)(a),x=(0,u.X)(r);return l.useEffect(()=>{let e=h.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==a&&t){let n=new Event("click",{bubbles:c});t.call(e,a),e.dispatchEvent(n)}},[m,a,c]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...d,tabIndex:-1,ref:f,style:{...d.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function b(e){return e?"checked":"unchecked"}k.displayName="SwitchBubbleInput";var y=n(8456);let S=l.forwardRef((e,t)=>{let{className:n,...l}=e;return(0,s.jsx)(g,{ref:t,className:(0,y.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full","border-2 border-transparent bg-white/10 transition-colors data-[state=checked]:bg-white/70",n),...l,children:(0,s.jsx)(v,{className:(0,y.cn)("pointer-events-none block h-5 w-5 rounded-full bg-slate-900 shadow-lg ring-0 transition-transform","translate-x-0 data-[state=checked]:translate-x-5")})})});S.displayName="Switch"},7627:(e,t,n)=>{n.d(t,{c:()=>i});var s=n(2115),l=n(9708),r=n(5190);function i(e){let{user:t,deckType:n,initialDeck:i}=e,[a,c]=(0,s.useState)(i),[o,u]=(0,s.useState)({}),[d,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!0),[x,p]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{if(h(!1),!t){c(i),u({}),h(!0);return}try{let a=(0,l.H9)(r.db,"users",t.uid),o=await (0,l.x7)(a);if(o.exists()){var e,s;let t=null==(e=o.data().learningData)?void 0:e[n];c((null==t||null==(s=t.deck)?void 0:s.length)?t.deck:i),u((null==t?void 0:t.favs)||{})}else c(i),u({})}catch(e){console.error("데이터 로딩 실패:",e),c(i),u({})}finally{h(!0)}})()},[t,n,i]);let g=(0,s.useCallback)(async(e,s)=>{if(t&&d)try{let i=(0,l.H9)(r.db,"users",t.uid);await (0,l.BN)(i,{learningData:{[n]:{deck:e,favs:s}}},{merge:!0})}catch(e){console.error("데이터 저장 실패:",e)}},[t,d,n]);return(0,s.useEffect)(()=>{d&&t&&g(a,o)},[a,o,d,t,g]),{deck:a,setDeck:c,favs:o,toggleFav:e=>u(t=>{let n={...t};return n[e]?delete n[e]:n[e]=!0,n}),shuffleDeck:()=>c(e=>[...e].sort(()=>Math.random()-.5)),resetDeckToInitial:()=>{c(i),u({})},isDataLoaded:d,clearFavs:()=>u({})}}},8298:(e,t,n)=>{n.d(t,{q:()=>l});var s=n(2115);function l(){let[e,t]=(0,s.useState)(!1),[n,l]=(0,s.useState)([]),[r,i]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(window.speechSynthesis)return window.speechSynthesis.onvoiceschanged=e,e(),()=>{window.speechSynthesis.onvoiceschanged=null};function e(){let e=window.speechSynthesis.getVoices().filter(e=>e.lang.startsWith("ko"));l(e),!(e.length>0)||r&&e.includes(r)||i(e[0]),t(e.length>0)}},[r]),{ttsReady:e,speakKo:t=>{if(!e||!window.speechSynthesis)return;window.speechSynthesis.cancel();let n=new window.SpeechSynthesisUtterance(t);n.lang="ko-KR",r&&(n.voice=r),window.speechSynthesis.speak(n)},voices:n,selectedVoice:r,selectVoice:e=>{i(e)}}}}}]);