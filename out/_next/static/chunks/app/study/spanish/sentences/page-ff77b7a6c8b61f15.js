(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[426],{15:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var a=n(2115);function s(){let[e,t]=(0,a.useState)([]),[n,s]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1),[o,r]=(0,a.useState)(!1),c=(0,a.useMemo)(()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),[]);return(0,a.useEffect)(()=>{if("speechSynthesis"in window){l(!0);let e=()=>{let e=window.speechSynthesis.getVoices().filter(e=>e.lang.startsWith("es-"));if(t(e),e.length>0){let t=localStorage.getItem("selectedEsVoice");s(e.find(e=>e.name===t)||e[0]),r(!0)}};return window.speechSynthesis.onvoiceschanged=e,e(),()=>{window.speechSynthesis.onvoiceschanged=null}}},[]),{isSupported:i,ready:o,speakEs:e=>{if(!i||!o||!n||!e)return;window.speechSynthesis.cancel();let t=new SpeechSynthesisUtterance(e);t.voice=n,t.lang=n.lang,t.rate=.9,window.speechSynthesis.speak(t)},selectedVoice:n,voices:e,selectVoice:e=>{e&&(s(e),localStorage.setItem("selectedEsVoice",e.name))},isSafari:c}}},3382:(e,t,n)=>{Promise.resolve().then(n.bind(n,6277))},6031:(e,t,n)=>{"use strict";n.d(t,{q:()=>s});var a=n(2115);function s(){let[e,t]=(0,a.useState)(!1);return(0,a.useEffect)(()=>t(!0),[]),e}},6277:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var a=n(5155),s=n(2115),i=n(9070),l=n(7325),o=n(8324),r=n(2171),c=n(4643),d=n(5511),u=n(7288),h=n(5167),m=n(5577),p=n(509);let x=e=>{let{card:t,isFlipped:n,isFav:s,onFlip:i,onToggleFav:l,sentenceFontSize:o}=e;return(0,a.jsx)("div",{className:"[perspective:1200px] w-full max-w-md mx-auto",children:(0,a.jsxs)("div",{role:"button",tabIndex:0,"aria-label":"flip card",onClick:i,className:"relative h-64 md:h-72 transition-transform duration-500 [transform-style:preserve-3d] cursor-pointer",style:{transform:n?"rotateY(180deg)":"rotateY(0deg)"},children:[(0,a.jsxs)("div",{className:"absolute inset-0 bg-slate-800/60 backdrop-blur rounded-2xl shadow-xl border border-white/10 flex flex-col items-center justify-center p-6 [backface-visibility:hidden]",children:[(0,a.jsx)(r.$,{type:"button",size:"icon",variant:"secondary",onClick:e=>{e.stopPropagation(),l()},className:"absolute top-4 right-4 h-9 w-9 rounded-full bg-white/10 hover:bg-white/15 border border-white/10",title:s?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,a.jsx)("span",{className:"text-xl flex items-center justify-center w-full h-full",children:s?"⭐":"☆"})}),(0,a.jsx)("div",{className:"text-sm text-white/60 mb-4",children:"카드를 눌러 정답을 확인하세요"}),(0,a.jsx)("p",{className:"font-semibold leading-relaxed text-center tracking-wide",style:{fontSize:"".concat(o,"px")},children:t.sentence})]}),(0,a.jsx)("div",{className:"absolute inset-0 bg-slate-800/80 backdrop-blur rounded-2xl shadow-xl border border-white/10 flex flex-col items-center justify-center p-6 [transform:rotateY(180deg)] [backface-visibility:hidden]",children:(0,a.jsxs)("div",{className:"w-full text-center space-y-2",children:[(0,a.jsx)("p",{className:"text-lg font-bold",style:{fontSize:"".concat(o,"px")},children:t.sentence}),(0,a.jsx)("div",{className:"w-full h-[1px] bg-white/10 my-3"}),(0,a.jsx)("p",{className:"text-xl font-bold text-cyan-300",children:t.translation}),(0,a.jsxs)("p",{className:"text-base text-white/70 tracking-wide",children:["(",t.pronunciation,")"]})]})})]})})};var g=n(7627),f=n(15);let w=[{id:1,sentence:"\xbfQu\xe9 tal?",translation:"어떻게 지내?",pronunciation:"Que tal?"},{id:2,sentence:"Me llamo Ssun.",translation:"내 이름은 쑨이야.",pronunciation:"Me llamo Ssun."},{id:3,sentence:"Mucho gusto.",translation:"만나서 반가워.",pronunciation:"Mucho gusto."},{id:4,sentence:"El tiempo est\xe1 bueno hoy.",translation:"오늘 날씨가 좋네요.",pronunciation:"El tiempo esta bueno hoy."},{id:5,sentence:"Tengo hambre.",translation:"배고파요.",pronunciation:"Tengo hambre."},{id:6,sentence:"\xbfD\xf3nde est\xe1 el ba\xf1o?",translation:"화장실이 어디에 있나요?",pronunciation:"Donde esta el bano?"},{id:7,sentence:"La cuenta, por favor.",translation:"계산서 주세요.",pronunciation:"La cuenta, por favor."},{id:8,sentence:"Este es mi amigo.",translation:"이 사람은 제 친구예요.",pronunciation:"Este es mi amigo."},{id:9,sentence:"Me gusta la m\xfasica pop.",translation:"저는 팝 음악을 좋아해요.",pronunciation:"Me gusta la musica pop."},{id:10,sentence:"Es muy interesante.",translation:"그것은 매우 흥미롭네요.",pronunciation:"Es muy interesante."},{id:11,sentence:"\xbfPuedes ayudarme?",translation:"저를 도와주실 수 있나요?",pronunciation:"Puedes ayudarme?"},{id:12,sentence:"No entiendo.",translation:"이해가 안 돼요.",pronunciation:"No entiendo."},{id:13,sentence:"Hablo un poco de espa\xf1ol.",translation:"저는 스페인어를 조금 할 수 있어요.",pronunciation:"Hablo un poco de espanol."},{id:14,sentence:"\xa1Qu\xe9 tengas un buen d\xeda!",translation:"좋은 하루 보내세요!",pronunciation:"Que tengas un buen dia!"},{id:15,sentence:"Nos vemos ma\xf1ana.",translation:"내일 만나요.",pronunciation:"Nos vemos manana."}];var b=n(8565),v=n(1206),y=n(7323),j=n(6031);function S(){var e;let t="spanish-sentences",{user:n}=(0,i.A)(),{open:S}=(0,l.X)(),{deck:N,setDeck:k,favs:E,toggleFav:C,shuffleDeck:M,resetDeckToInitial:T}=(0,g.c)({user:n,deckType:t,initialDeck:w}),[F,I]=(0,s.useState)(0),[A,L]=(0,s.useState)(!1),[P,D]=(0,s.useState)("single"),[_,z]=(0,s.useState)({}),[O,V]=(0,s.useState)(1),[R,$]=(0,s.useState)(!1),[H,Q]=(0,s.useState)(!1),[U,Y]=(0,s.useState)("Lato"),[q,B]=(0,s.useState)(32),[J,W]=(0,s.useState)("일상 회화"),[X,G]=(0,s.useState)(10),[K,Z]=(0,s.useState)(!1),{isSupported:ee,ready:et,speakEs:en,selectedVoice:ea,voices:es,selectVoice:ei,isSafari:el}=(0,f.c)(),eo=(0,s.useMemo)(()=>H?N.filter(e=>E[e.id]):N,[N,H,E]),{currentCards:er,totalPages:ec}=(0,s.useMemo)(()=>{let e=Math.ceil(eo.length/10)||1,t=(O-1)*10;return{currentCards:eo.slice(t,t+10),totalPages:e}},[O,eo]),ed=(0,s.useCallback)(()=>L(e=>!e),[]),eu=(0,s.useCallback)(()=>{I(e=>(e+1)%Math.max(1,eo.length)),L(!1)},[eo.length]),eh=(0,s.useCallback)(()=>{I(e=>(e-1+Math.max(1,eo.length))%Math.max(1,eo.length)),L(!1)},[eo.length]),em=()=>{T(),I(0),L(!1),z({}),V(1)};async function ep(e,n){Z(!0);try{let a=await (0,y.x)(t,e,n);k(a),I(0),L(!1),z({}),V(1),alert("'".concat(e,"' 주제의 새 문장 ").concat(a.length,"개를 생성했습니다!"))}catch(e){alert("문장 생성에 실패했습니다. 다시 시도해주세요.")}finally{Z(!1)}}let ex=null!=(e=eo[F])?e:null,eg=(0,s.useMemo)(()=>b.y[U]||U,[U]);(0,s.useEffect)(()=>{let e=e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||"single"===P&&("Enter"===e.key||" "===e.key?(e.preventDefault(),ed()):"ArrowRight"===e.key?eu():"ArrowLeft"===e.key&&eh())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P,ed,eu,eh]);let ef=(0,j.q)()&&"speechSynthesis"in window;return(0,a.jsxs)("div",{className:"min-h-screen w-full bg-gradient-to-b from-slate-950 via-slate-900 to-slate-800 text-white flex flex-col items-center p-6",style:{fontFamily:eg},children:[(0,a.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,a.jsx)(m.R,{name:null==n?void 0:n.nickname,subject:"스페인어 문장"})}),!n&&(0,a.jsx)(p.c,{onLoginClick:()=>S("login")}),"single"===P&&(0,a.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,a.jsxs)("span",{className:"text-white/70",children:["⚡진행률 : ",eo.length?"".concat(Math.min(F+1,eo.length)," / ").concat(eo.length):"0 / 0"]}),ef&&(0,a.jsx)(r.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>en((null==ex?void 0:ex.sentence)||""),disabled:!et||!ex,children:"\uD83D\uDD0A 듣기 (Oraci\xf3n)"}),(0,a.jsx)(r.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>$(!0),"aria-haspopup":"dialog","aria-expanded":R,title:"설정",children:"⚙️ 설정"}),(0,a.jsx)(o.g,{open:R,onOpenChange:$,user:n,deckType:t,isTtsSupported:ee,selectedVoice:ea,selectVoice:ei,voices:es,isSafari:el,fontFamily:U,setFontFamily:Y,sentenceFontSize:q,setSentenceFontSize:B,resetDeck:em,topic:J,setTopic:W,wordCount:X,setWordCount:G,loadingImport:K,importContent:ep})]}),(0,a.jsx)("main",{className:"w-full max-w-5xl select-none",children:"single"===P?0===eo.length?(0,a.jsx)(d.y,{viewMode:"single"}):ex&&(0,a.jsx)(x,{card:ex,isFlipped:A,isFav:!!E[ex.id],onFlip:ed,onToggleFav:()=>C(ex.id),sentenceFontSize:q},ex.id):0===eo.length?(0,a.jsx)(d.y,{viewMode:"grid"}):(0,a.jsx)(u.o,{variant:"words",cards:er.map(e=>({id:e.id,katakana:e.sentence,furigana:"",answer:e.translation,emoji:"\uD83D\uDC83"})),favs:E,flippedStates:_,onToggleFav:e=>C(e),onToggleCardFlip:e=>z(t=>({...t,[e]:!t[e]})),page:{current:O,total:ec,onPrev:()=>V(e=>Math.max(e-1,1)),onNext:()=>V(e=>Math.min(e+1,ec))}})}),"single"===P&&(0,a.jsx)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2 text-sm",children:(0,a.jsx)(h.A,{onPrev:eh,onNext:eu,onShuffle:()=>{M(),I(0),L(!1)},onReset:em})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[n&&(0,a.jsx)(r.$,{variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>{D(e=>"single"===e?"grid":"single"),L(!1)},children:"single"===P?"여러 장 모아보기":"한 장씩 학습하기"}),(0,a.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border-white/10 bg-white/5",children:[(0,a.jsx)("span",{className:"text-white/80 font-semibold",children:"⭐ Only"}),(0,a.jsx)(c.d,{checked:H,onCheckedChange:e=>{Q(e),I(0),L(!1),V(1)}})]})]}),(0,a.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-white/70 bg-white/5 rounded-xl px-4 py-3",children:(0,a.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,a.jsx)("li",{children:"⚙️설정에서 TTS Voice, Font, 폰트 크기를 조절할 수 있습니다."}),(0,a.jsx)("li",{children:"⚙️설정에서 AI 단어 추가 학습을 할 수 있습니다."}),(0,a.jsxs)("li",{children:["키보드: ",(0,a.jsx)("kbd",{children:"Enter"})," 카드 뒤집기, ",(0,a.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("span",{className:"text-white/40 text-xs",children:["스페인어 공부 v",v.h]})})]})}},7323:(e,t,n)=>{"use strict";n.d(t,{x:()=>o});var a,s=n(2587);let i=(null===s.Ii||void 0===s.Ii||null==(a=s.Ii.getPlatform)?void 0:a.call(s.Ii))!=="web",l="https://ssunbae-api.vercel.app/".replace(/\/$/,"");async function o(e,t,n){let a=function(e){if(!i)return e;if(!l)throw Error("NEXT_PUBLIC_API_BASE_URL is not set. Set it in .env.production (build before copy/sync).");return"".concat(l).concat(e)}("/api/generate");try{let s=await fetch(a,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({deckType:e,topic:t,count:n})});if(!s.ok){let e="AI 데이터 생성 실패 (".concat(s.status,")");try{let t=await s.json();e="".concat(t.error||e,"\n\n[세부 정보]\n").concat(t.details||"서버 오류")}catch(n){let t=await s.text();e+="\n\n[서버 응답]\n".concat(t.slice(0,300)).concat(t.length>300?"…":"")}throw Error(e)}let i=s.headers.get("content-type")||"";if(!i.includes("application/json")){let e=await s.text();throw Error("API 응답이 JSON이 아닙니다 (Content-Type: ".concat(i,").\n")+"URL: ".concat(a,"\n응답 미리보기:\n").concat(e.slice(0,300)).concat(e.length>300?"…":""))}return(await s.json()).map((e,t)=>({...e,id:e.id||Date.now()+t}))}catch(e){throw console.error("Error fetching generated content:",e),e}}}},e=>{e.O(0,[135,965,398,707,663,765,968,921,441,255,358],()=>e(e.s=3382)),_N_E=e.O()}]);