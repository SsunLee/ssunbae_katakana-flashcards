(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9631],{5709:(e,a,n)=>{Promise.resolve().then(n.bind(n,6725))},6725:(e,a,n)=>{"use strict";n.r(a),n.d(a,{default:()=>y});var t=n(5155),l=n(2115),i=n(9070),s=n(7325),r=n(8324),c=n(2171),d=n(4643),o=n(5511),m=n(5167),x=n(5577),u=n(509),h=n(7627);let g=[{id:1,char:"가",meaning:"go; family name; song (contextual)",example:"가는 길 입니다."},{id:2,char:"나",meaning:"I, me",example:"나는 학생입니다."},{id:3,char:"다",meaning:"all, everything",example:"다 모였어요."},{id:4,char:"라",meaning:"(used in grammar)",example:"라디오를 듣다."},{id:5,char:"마",meaning:"(exclamation, also 'horse')",example:"마! 이리 와봐."},{id:6,char:"바",meaning:"bar, look, see",example:"바다가 보인다."},{id:7,char:"사",meaning:"four; to buy; person (in compounds)",example:"사과를 샀어요."},{id:8,char:"아",meaning:"ah; child",example:"아, 알겠어요."},{id:9,char:"자",meaning:"let's; to sleep",example:"자, 출발하자!"},{id:10,char:"차",meaning:"car; tea",example:"차를 마셔요."},{id:11,char:"카",meaning:"car (loanword)",example:"카드를 사용하세요."},{id:12,char:"타",meaning:"to ride",example:"버스를 타요."},{id:13,char:"파",meaning:"green onion; to dig",example:"파를 샀어요."},{id:14,char:"하",meaning:"to do",example:"공부를 하다."},{id:15,char:"거",meaning:"thing (것)",example:"이거 뭐예요?"},{id:16,char:"너",meaning:"you",example:"너는 누구니?"},{id:17,char:"더",meaning:"more",example:"더 주세요."},{id:18,char:"러",meaning:"(used in grammar)",example:"러시아에 가다."},{id:19,char:"머",meaning:"head",example:"머리가 아파요."},{id:20,char:"버",meaning:"(used in 버스, 버리다)",example:"버스를 기다려요."},{id:21,char:"서",meaning:"stand; from",example:"여기서 기다리세요."},{id:22,char:"어",meaning:"language; how",example:"어떻게 해요?"},{id:23,char:"저",meaning:"I (formal); that",example:"저는 선생님입니다."},{id:24,char:"처",meaning:"(used in 처럼)",example:"아이처럼 웃어요."},{id:25,char:"커",meaning:"big (커다랗다)",example:"커피를 마셔요."},{id:26,char:"터",meaning:"site, place",example:"공사 터입니다."},{id:27,char:"퍼",meaning:"scoop",example:"물을 퍼 올리다."},{id:28,char:"허",meaning:"permit; 허락",example:"허락을 받다."},{id:29,char:"고",meaning:"and (grammar)",example:"먹고 마시다."},{id:30,char:"노",meaning:"play; 노래(song)",example:"노래를 부르다."},{id:31,char:"도",meaning:"also, too",example:"나도 가고 싶어요."},{id:32,char:"로",meaning:"to, toward (grammar)",example:"학교로 가요."},{id:33,char:"모",meaning:"all; 모자(hat)",example:"모자를 써요."},{id:34,char:"보",meaning:"see, look",example:"영화를 보다."},{id:35,char:"소",meaning:"cow; 소리(sound)",example:"소가 풀을 먹어요."},{id:36,char:"오",meaning:"come",example:"여기로 오세요."},{id:37,char:"조",meaning:"group; 조용하다(quiet)",example:"조용히 하세요."},{id:38,char:"초",meaning:"beginning; 초등학교(elementary school)",example:"초등학생입니다."},{id:39,char:"코",meaning:"nose",example:"코가 막혔어요."},{id:40,char:"토",meaning:"soil; Saturday",example:"토요일에 만나요."},{id:41,char:"포",meaning:"grape (포도)",example:"포도를 먹어요."},{id:42,char:"호",meaning:"lake; 호수(lake)",example:"호수에서 놀아요."}];function p(e){let{syllable:a,isFlipped:n,isFav:l,onFlip:i,onToggleFav:s,fontSize:r}=e;return(0,t.jsx)("div",{className:"relative w-full max-w-md mx-auto",children:(0,t.jsx)("div",{className:"perspective-1000 w-full aspect-[3/4] max-h-[340px] min-h-[220px] cursor-pointer",onClick:i,children:(0,t.jsxs)("div",{className:"relative w-full h-full transition-transform duration-500 transform-style-3d ".concat(n?"rotate-y-180":""),children:[(0,t.jsxs)("div",{className:"absolute inset-0 backface-hidden bg-card border-2 border-border rounded-2xl shadow-lg p-4 flex flex-col items-center justify-center",children:[(0,t.jsx)(c.$,{type:"button",size:"icon",variant:"secondary",onClick:e=>{e.stopPropagation(),s()},className:"absolute top-4 right-4 h-9 w-9 rounded-full",title:l?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,t.jsx)("span",{className:"text-xl flex items-center justify-center w-full h-full",children:l?"⭐":"☆"})}),(0,t.jsx)("div",{className:"text-center font-bold mb-4",style:{fontSize:"".concat(r,"px")},children:a.char})]}),(0,t.jsxs)("div",{className:"absolute inset-0 backface-hidden rotate-y-180 bg-card border-2 border-primary/50 rounded-2xl shadow-lg p-4 flex flex-col items-center justify-center",children:[(0,t.jsx)(c.$,{type:"button",size:"icon",variant:"secondary",onClick:e=>{e.stopPropagation(),s()},className:"absolute top-4 right-4 h-9 w-9 rounded-full",title:l?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,t.jsx)("span",{className:"text-xl flex items-center justify-center w-full h-full",children:l?"⭐":"☆"})}),(0,t.jsxs)("div",{className:"w-full text-center space-y-4",children:[(0,t.jsx)("div",{className:"font-bold text-foreground mb-2",style:{fontSize:"".concat(r,"px")},children:a.char}),a.meaning&&(0,t.jsx)("div",{className:"text-xl text-muted-foreground mb-4",children:a.meaning}),a.example&&(0,t.jsx)("div",{className:"text-sm text-muted-foreground/80 mt-4 p-3 bg-muted/50 rounded-lg",children:a.example})]})]})]})})})}function f(e){let{syllables:a,favs:n,flippedStates:l,onToggleFav:i,onToggleCardFlip:s,page:r,fontSize:d}=e;return(0,t.jsxs)("div",{className:"w-full",children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:a.map(e=>(0,t.jsx)("div",{className:"perspective-1000 cursor-pointer",onClick:()=>s(e.id),children:(0,t.jsxs)("div",{className:"relative w-full aspect-[3/4] max-h-[340px] min-h-[220px] transition-transform duration-500 transform-style-3d ".concat(l[e.id]?"rotate-y-180":""),children:[(0,t.jsxs)("div",{className:"absolute inset-0 backface-hidden bg-card border border-border rounded-xl shadow p-4 flex flex-col items-center justify-center",children:[(0,t.jsx)(c.$,{type:"button",size:"icon",variant:"secondary",onClick:a=>{a.stopPropagation(),i(e.id)},className:"absolute top-4 right-4 h-9 w-9 rounded-full",title:n[e.id]?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,t.jsx)("span",{className:"text-xl flex items-center justify-center w-full h-full",children:n[e.id]?"⭐":"☆"})}),(0,t.jsx)("div",{style:{fontSize:"".concat(Math.round(.7*d),"px")},className:"font-bold",children:e.char})]}),(0,t.jsxs)("div",{className:"absolute inset-0 backface-hidden rotate-y-180 bg-card border border-primary/50 rounded-xl shadow p-4 flex flex-col items-center justify-center text-center",children:[(0,t.jsx)(c.$,{type:"button",size:"icon",variant:"secondary",onClick:a=>{a.stopPropagation(),i(e.id)},className:"absolute top-4 right-4 h-9 w-9 rounded-full",title:n[e.id]?"즐겨찾기 해제":"즐겨찾기 추가",children:(0,t.jsx)("span",{className:"text-xl flex items-center justify-center w-full h-full",children:n[e.id]?"⭐":"☆"})}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:e.meaning}),e.example&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground/70 mt-2",children:e.example})]})]})},e.id))}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:r.onPrev,disabled:1===r.current,children:"이전"}),(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:[r.current," / ",r.total]}),(0,t.jsx)(c.$,{variant:"outline",size:"sm",onClick:r.onNext,disabled:r.current===r.total,children:"다음"})]})]})}var b=n(8565),j=n(6401),v=n(6031);function y(){var e,a;let n="korean-syllables",{user:y}=(0,i.A)(),{open:w}=(0,s.X)(),{deck:N,favs:k,toggleFav:S,shuffleDeck:C,resetDeckToInitial:z}=(0,h.c)({user:y,deckType:n,initialDeck:g}),[F,M]=(0,l.useState)(0),[D,P]=(0,l.useState)(!1),[$,E]=(0,l.useState)("single"),[T,_]=(0,l.useState)(1),[R,K]=(0,l.useState)(!1),[O,V]=(0,l.useState)(!1),[A,I]=(0,l.useState)("Noto Sans KR"),[q,H]=(0,l.useState)(96),[W,B]=(0,l.useState)({}),{ttsReady:L,speakKo:U,voices:X,selectedVoice:G,selectVoice:J}=function(){let[e,a]=(0,l.useState)(!1),[n,t]=(0,l.useState)([]),[i,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{if(window.speechSynthesis)return window.speechSynthesis.onvoiceschanged=e,e(),()=>{window.speechSynthesis.onvoiceschanged=null};function e(){let e=window.speechSynthesis.getVoices().filter(e=>e.lang.startsWith("ko"));t(e),e.length>0&&!i&&s(e[0]),a(e.length>0)}},[i]),{ttsReady:e,speakKo:e=>{if(!window.speechSynthesis)return;let a=new window.SpeechSynthesisUtterance(e);a.lang="ko-KR",i&&(a.voice=i),window.speechSynthesis.speak(a)},voices:n,selectedVoice:i,selectVoice:e=>{s(e)}}}(),Q=(0,l.useMemo)(()=>O?N.filter(e=>k[e.id]):N,[N,O,k]),{currentCards:Y,totalPages:Z}=(0,l.useMemo)(()=>{let e=Math.ceil(Q.length/10)||1,a=(T-1)*10;return{currentCards:Q.slice(a,a+10),totalPages:e}},[T,Q]),ee=(0,l.useCallback)(()=>P(e=>!e),[]),ea=(0,l.useCallback)(()=>{M(e=>(e+1)%Math.max(1,Q.length)),P(!1)},[Q.length]),en=(0,l.useCallback)(()=>{M(e=>(e-1+Math.max(1,Q.length))%Math.max(1,Q.length)),P(!1)},[Q.length]),et=()=>{z(),M(0),P(!1),B({}),_(1)},el=null!=(e=Q[F])?e:null,ei=(0,l.useMemo)(()=>b.y[A]||b.y["Noto Sans KR"],[A]);if(!(0,v.q)())return(0,t.jsx)("div",{className:"min-h-screen w-full bg-background flex items-center justify-center",children:(0,t.jsx)("span",{className:"text-foreground",children:"로딩 중..."})});let es=null!=(a=j.a[n])?a:"완성형 한글 학습";return(0,t.jsxs)("div",{className:"min-h-screen w-full flex flex-col items-center p-6",style:{fontFamily:ei},children:[(0,t.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,t.jsx)(x.R,{name:(null==y?void 0:y.nickname)||void 0,subject:es})}),!y&&(0,t.jsx)(u.c,{onLoginClick:()=>w("login")}),"single"===$&&(0,t.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,t.jsxs)("span",{className:"text-muted-foreground",children:["⚡진행률 : ",Q.length?"".concat(Math.min(F+1,Q.length)," / ").concat(Q.length):"0 / 0"]}),(0,t.jsx)("div",{className:"flex-1 flex justify-center",children:(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>U((null==el?void 0:el.char)||""),disabled:!L||!el,title:"듣기",children:"\uD83D\uDD0A 듣기 (한글)"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(c.$,{size:"sm",variant:"outline",onClick:()=>K(!0),"aria-haspopup":"dialog","aria-expanded":R,title:"설정",children:"⚙️ 설정"}),(0,t.jsx)(r.g,{open:R,onOpenChange:K,user:y,deckType:n,isTtsSupported:L,selectedVoice:G,selectVoice:J,voices:X,isSafari:!1,fontFamily:A,setFontFamily:I,resetDeck:et,wordFontSize:q,setWordFontSize:H})]})]}),"single"===$?0===Q.length?(0,t.jsx)(o.y,{viewMode:"single"}):el&&(0,t.jsx)(p,{syllable:el,isFlipped:D,isFav:!!k[el.id],onFlip:ee,onToggleFav:()=>S(el.id),fontSize:q}):0===Q.length?(0,t.jsx)(o.y,{viewMode:"grid"}):(0,t.jsx)(f,{syllables:Y,favs:k,flippedStates:W,onToggleFav:e=>S(e),onToggleCardFlip:e=>B(a=>({...a,[e]:!a[e]})),page:{current:T,total:Z,onPrev:()=>_(e=>Math.max(e-1,1)),onNext:()=>_(e=>Math.min(e+1,Z))},fontSize:q}),"single"===$&&(0,t.jsx)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2 text-sm",children:(0,t.jsx)(m.A,{onPrev:en,onNext:ea,onShuffle:()=>{C(),M(0),P(!1)},onReset:et})}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[y&&(0,t.jsx)(c.$,{variant:"outline",onClick:()=>{E(e=>"single"===e?"grid":"single"),P(!1)},children:"single"===$?"여러 장 모아보기":"한 장씩 학습하기"}),(0,t.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border border-border bg-card",children:[(0,t.jsx)("span",{className:"text-foreground font-semibold",children:"⭐ Only"}),(0,t.jsx)(d.d,{checked:O,onCheckedChange:e=>{V(e),M(0),P(!1),_(1)}})]})]}),"single"===$&&(0,t.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-muted-foreground bg-card/50 border border-border rounded-xl px-4 py-3",children:(0,t.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,t.jsx)("li",{children:"⚙️설정에서 Font와 크기를 조절할 수 있습니다."}),(0,t.jsxs)("li",{children:["키보드: Enter 카드 뒤집기, ",(0,t.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})})]})}},7627:(e,a,n)=>{"use strict";n.d(a,{c:()=>s});var t=n(2115),l=n(9708),i=n(5190);function s(e){let{user:a,deckType:n,initialDeck:s}=e,[r,c]=(0,t.useState)(s),[d,o]=(0,t.useState)({}),[m,x]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!0),[g,p]=(0,t.useState)(null);(0,t.useEffect)(()=>{(async()=>{if(x(!1),!a){c(s),o({}),x(!0);return}try{let r=(0,l.H9)(i.db,"users",a.uid),d=await (0,l.x7)(r);if(d.exists()){var e,t;let a=null==(e=d.data().learningData)?void 0:e[n];c((null==a||null==(t=a.deck)?void 0:t.length)?a.deck:s),o((null==a?void 0:a.favs)||{})}else c(s),o({})}catch(e){console.error("데이터 로딩 실패:",e),c(s),o({})}finally{x(!0)}})()},[a,n,s]);let f=(0,t.useCallback)(async(e,t)=>{if(a&&m)try{let s=(0,l.H9)(i.db,"users",a.uid);await (0,l.BN)(s,{learningData:{[n]:{deck:e,favs:t}}},{merge:!0})}catch(e){console.error("데이터 저장 실패:",e)}},[a,m,n]);return(0,t.useEffect)(()=>{m&&a&&f(r,d)},[r,d,m,a,f]),{deck:r,setDeck:c,favs:d,toggleFav:e=>o(a=>{let n={...a};return n[e]?delete n[e]:n[e]=!0,n}),shuffleDeck:()=>c(e=>[...e].sort(()=>Math.random()-.5)),resetDeckToInitial:()=>{c(s),o({})},isDataLoaded:m,clearFavs:()=>o({})}}}},e=>{e.O(0,[2992,7811,5707,2549,663,9765,6525,8441,1255,7358],()=>e(e.s=5709)),_N_E=e.O()}]);