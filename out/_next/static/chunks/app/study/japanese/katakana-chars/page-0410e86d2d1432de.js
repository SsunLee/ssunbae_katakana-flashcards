(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{323:(e,t,s)=>{Promise.resolve().then(s.bind(s,2853))},2853:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var a=s(5155),n=s(2115),l=s(9070),i=s(7325),r=s(8324),c=s(2171),o=s(4643),d=s(8569),h=s(5511),x=s(391),u=s(7288),m=s(5167),g=s(5577),p=s(509),w=s(1215),f=s(7627),j=s(5246),k=s(8565),b=s(1206),v=s(6401),y=s(6031);let S={gojuon:"50음도",dakuten:"탁음",handakuten:"반탁음",yoon:"요음"};function N(){var e;let t=w.X,s="katakana-chars",[N,M]=(0,n.useState)(96),[C,F]=(0,n.useState)(!1);(0,n.useEffect)(()=>{F(!0)},[]);let{user:E}=(0,l.A)(),{open:T}=(0,i.X)(),{deck:A,favs:z,toggleFav:D,shuffleDeck:L,resetDeckToInitial:O}=(0,f.c)({user:E,deckType:s,initialDeck:t}),[P,_]=(0,n.useState)(0),[R,V]=(0,n.useState)(!1),[$,H]=(0,n.useState)("single"),[I,J]=(0,n.useState)(1),[X,q]=(0,n.useState)({}),[W,Z]=(0,n.useState)(!1),[B,G]=(0,n.useState)(!1),[K,Q]=(0,n.useState)("Noto Sans JP"),[U,Y]=(0,n.useState)("일상 회화"),[ee,et]=(0,n.useState)(10),[es,ea]=(0,n.useState)(!1),[en,el]=(0,n.useState)({gojuon:!0,dakuten:!0,handakuten:!1,yoon:!1}),ei=(0,n.useMemo)(()=>new Map(t.map(e=>[e.id,e.type])),[t]),er=(0,n.useMemo)(()=>new Set(Object.keys(en).filter(e=>en[e])),[en]),ec=(0,n.useMemo)(()=>{let e=er.size>0?A.filter(e=>{let t=ei.get(e.id);return!!t&&er.has(t)}):[];return B?e.filter(e=>z[e.id]):e},[A,z,B,er,ei]),{currentCards:eo,totalPages:ed}=(0,n.useMemo)(()=>{let e=Math.ceil(ec.length/10)||1,t=(I-1)*10;return{currentCards:ec.slice(t,t+10),totalPages:e}},[I,ec]),eh=(0,n.useCallback)(()=>V(e=>!e),[]),ex=(0,n.useCallback)(()=>{_(e=>(e+1)%Math.max(1,ec.length)),V(!1)},[ec.length]),eu=(0,n.useCallback)(()=>{_(e=>(e-1+Math.max(1,ec.length))%Math.max(1,ec.length)),V(!1)},[ec.length]),em=()=>{O(),_(0),V(!1),q({}),J(1)},{isSupported:eg,ready:ep,speakJa:ew,selectedVoice:ef,voices:ej,selectVoice:ek,isSafari:eb}=(0,j.Z)(),ev=null!=(e=ec[P])?e:null,ey=(0,n.useMemo)(()=>k.y[K]||k.y["Noto Sans JP"],[K]);(0,n.useEffect)(()=>{let e=e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||"single"===$&&("Enter"===e.key||" "===e.key?(e.preventDefault(),eh()):"ArrowRight"===e.key?ex():"ArrowLeft"===e.key&&eu())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[$,eh,ex,eu]);let eS=(0,y.q)(),eN=eS&&"speechSynthesis"in window;return(0,a.jsxs)("div",{className:"w-full flex flex-col items-center p-6",style:{fontFamily:ey},children:[(0,a.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,a.jsx)(g.R,{name:null==E?void 0:E.nickname,subject:v.a[s]})}),!E&&(0,a.jsx)(p.c,{onLoginClick:()=>T("login")}),"single"===$&&(0,a.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,a.jsxs)("span",{className:"text-white/70",children:["⚡진행률 : ",ec.length?"".concat(Math.min(P+1,ec.length)," / ").concat(ec.length):"0 / 0"]}),eS&&eN&&(0,a.jsx)(c.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>ew((null==ev?void 0:ev.katakana)||""),disabled:!ep||!ev,children:"\uD83D\uDD0A 듣기 (ふりがな)"}),(0,a.jsx)(c.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>Z(!0),"aria-haspopup":"dialog","aria-expanded":W,title:"설정",children:"⚙️ 설정"}),(0,a.jsx)(r.g,{open:W,onOpenChange:Z,user:E,deckType:s,isTtsSupported:eg,selectedVoice:ef,selectVoice:ek,voices:ej,isSafari:eb,fontFamily:K,setFontFamily:Q,wordFontSize:N,setWordFontSize:M,resetDeck:em})]}),(0,a.jsx)("div",{className:"w-full max-w-md mx-auto mb-4 p-3 bg-slate-800/50 rounded-lg flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-sm",children:Object.keys(S).map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d.S,{id:e,checked:en[e],onCheckedChange:()=>el(t=>({...t,[e]:!t[e]}))}),(0,a.jsx)("span",{children:S[e]})]},e))}),(0,a.jsx)("main",{className:"w-full max-w-5xl select-none",children:"single"===$?0===ec.length?(0,a.jsx)(h.y,{viewMode:"single"}):ev&&(0,a.jsx)(x.g,{card:ev,deckType:s,isFlipped:R,isFav:!!z[ev.id],onFlip:eh,onToggleFav:()=>D(ev.id),fontSize:N},ev.id):(0,a.jsx)(a.Fragment,{children:0===ec.length?(0,a.jsx)(h.y,{viewMode:"grid"}):(0,a.jsx)(u.o,{variant:"chars",cards:eo,favs:z,flippedStates:X,onToggleFav:e=>D(e),onToggleCardFlip:e=>q(t=>({...t,[e]:!t[e]})),page:{current:I,total:ed,onPrev:()=>J(e=>Math.max(e-1,1)),onNext:()=>J(e=>Math.min(e+1,ed))}})})}),"single"===$&&(0,a.jsx)(m.A,{onPrev:eu,onNext:ex,onShuffle:()=>{L(),_(0),V(!1)},onReset:em}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[E&&(0,a.jsx)(c.$,{variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>{H(e=>"single"===e?"grid":"single"),V(!1)},children:"single"===$?"여러 장 모아보기":"한 장씩 학습하기"}),(0,a.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border border-white/10 bg-white/5",children:[(0,a.jsx)("span",{className:"text-white/80 font-semibold",children:"⭐ Only"}),(0,a.jsx)(o.d,{checked:B,onCheckedChange:e=>{G(e),_(0),V(!1),J(1)}})]})]}),(0,a.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-white/70 bg-white/5 rounded-xl px-4 py-3",children:(0,a.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,a.jsx)("li",{children:"⚙️설정에서 TTS Voice, Font, 폰트 크기를 조절할 수 있습니다."}),(0,a.jsx)("li",{children:"⚙️설정에서 AI 단어 추가 학습을 할 수 있습니다."}),(0,a.jsxs)("li",{children:["키보드: ",(0,a.jsx)("kbd",{children:"Enter"})," 카드 뒤집기, ",(0,a.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("span",{className:"text-white/40 text-xs",children:["가타카나 공부 v",b.h]})})]})}}},e=>{e.O(0,[135,965,398,707,663,765,921,754,441,255,358],()=>e(e.s=323)),_N_E=e.O()}]);