(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{2271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var n=a(5155),s=a(2115),l=a(9070),i=a(7325),r=a(8324),d=a(2171),o=a(4643),c=a(4342),u=a(5511),x=a(391),m=a(7288),h=a(5167),g=a(5577),p=a(509),f=a(1215);let j=e=>e.replace(/[\u30A1-\u30F6]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),k=f.X.map(e=>({...e,id:e.id+1e4,katakana:j(e.katakana),furigana:e.furigana,answer:j(e.answer)}));var b=a(7627),w=a(5246),y=a(8565),v=a(6401),S=a(6031);let C={gojuon:"50음도",dakuten:"탁음",handakuten:"반탁음",yoon:"요음"};function N(){var e;let t="hiragana-chars",{user:a}=(0,l.A)(),{open:f}=(0,i.X)(),{deck:j,favs:N,toggleFav:M,shuffleDeck:F,resetDeckToInitial:T}=(0,b.c)({user:a,deckType:t,initialDeck:k}),[E,A]=(0,s.useState)(0),[D,z]=(0,s.useState)(!1),[L,O]=(0,s.useState)("single"),[P,_]=(0,s.useState)(1),[R,V]=(0,s.useState)({}),[$,H]=(0,s.useState)(!1),[J,X]=(0,s.useState)(!1),[q,I]=(0,s.useState)("Noto Sans JP"),[W,Z]=(0,s.useState)(96),[B,G]=(0,s.useState)({gojuon:!0,dakuten:!0,handakuten:!1,yoon:!1}),K=(0,s.useMemo)(()=>new Map(k.map(e=>[e.id,e.type])),[k]),Q=(0,s.useMemo)(()=>new Set(Object.keys(B).filter(e=>B[e])),[B]),U=(0,s.useMemo)(()=>{let e=Q.size>0?j.filter(e=>{let t=K.get(e.id);return!!t&&Q.has(t)}):[];return J?e.filter(e=>N[e.id]):e},[j,N,J,Q,K]),{currentCards:Y,totalPages:ee}=(0,s.useMemo)(()=>{let e=Math.ceil(U.length/10)||1,t=(P-1)*10;return{currentCards:U.slice(t,t+10),totalPages:e}},[P,U]),et=(0,s.useCallback)(()=>z(e=>!e),[]),ea=(0,s.useCallback)(()=>{A(e=>(e+1)%Math.max(1,U.length)),z(!1)},[U.length]),en=(0,s.useCallback)(()=>{A(e=>(e-1+Math.max(1,U.length))%Math.max(1,U.length)),z(!1)},[U.length]),es=()=>{T(),A(0),z(!1),V({}),_(1)},{isSupported:el,ready:ei,speakJa:er,selectedVoice:ed,voices:eo,selectVoice:ec,isSafari:eu}=(0,w.Z)(),ex=(0,s.useMemo)(()=>y.y[q]||y.y["Noto Sans JP"],[q]),em=null!=(e=U[E])?e:null,eh=(0,s.useCallback)(e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||"single"===L&&("Enter"===e.key||" "===e.key?(e.preventDefault(),et()):"ArrowRight"===e.key?ea():"ArrowLeft"===e.key&&en())},[L,et,ea,en]);(0,s.useEffect)(()=>(window.addEventListener("keydown",eh),()=>window.removeEventListener("keydown",eh)),[eh]);let eg=(0,S.q)()&&"speechSynthesis"in window;return(0,n.jsxs)("div",{className:"w-full min-h-screen flex flex-col items-center p-6",style:{fontFamily:ex},children:[(0,n.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,n.jsx)(g.R,{name:(null==a?void 0:a.nickname)||void 0,subject:v.a[t]})}),!a&&(0,n.jsx)(p.c,{onLoginClick:()=>f("login")}),"single"===L&&(0,n.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,n.jsxs)("span",{className:"text-muted-foreground",children:["⚡진행률 : ",U.length?"".concat(Math.min(E+1,U.length)," / ").concat(U.length):"0 / 0"]}),eg&&(0,n.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>er((null==em?void 0:em.katakana)||""),disabled:!ei||!em,children:"\uD83D\uDD0A 듣기 (히라가나)"}),(0,n.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>H(!0),"aria-haspopup":"dialog","aria-expanded":$,title:"설정",children:"⚙️ 설정"}),(0,n.jsx)(r.g,{open:$,onOpenChange:H,user:a,deckType:t,isTtsSupported:el,selectedVoice:ed,selectVoice:ec,voices:eo,isSafari:eu,fontFamily:q,setFontFamily:I,wordFontSize:W,setWordFontSize:Z,resetDeck:es})]}),(0,n.jsx)("div",{className:"w-full max-w-md mx-auto mb-4 p-3 bg-card border border-border rounded-lg flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-sm",children:Object.keys(C).map(e=>(0,n.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,n.jsx)(c.S,{id:e,checked:B[e],onCheckedChange:()=>G(t=>({...t,[e]:!t[e]}))}),(0,n.jsx)("span",{children:C[e]})]},e))}),(0,n.jsx)("main",{className:"w-full max-w-5xl select-none",children:"single"===L?0===U.length?(0,n.jsx)(u.y,{viewMode:"single"}):em&&(0,n.jsx)(x.g,{card:em,deckType:t,isFlipped:D,isFav:!!N[em.id],onFlip:et,onToggleFav:()=>M(em.id),fontSize:W},em.id):(0,n.jsx)(n.Fragment,{children:0===U.length?(0,n.jsx)(u.y,{viewMode:"grid"}):(0,n.jsx)(m.o,{variant:"chars",cards:Y,favs:N,flippedStates:R,onToggleFav:e=>M(e),onToggleCardFlip:e=>V(t=>({...t,[e]:!t[e]})),page:{current:P,total:ee,onPrev:()=>_(e=>Math.max(e-1,1)),onNext:()=>_(e=>Math.min(e+1,ee))}})})}),"single"===L&&(0,n.jsx)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2 text-sm",children:(0,n.jsx)(h.A,{onPrev:en,onNext:ea,onShuffle:()=>{F(),A(0),z(!1)},onReset:es})}),(0,n.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[a&&(0,n.jsx)(d.$,{variant:"outline",onClick:()=>{O(e=>"single"===e?"grid":"single"),z(!1)},children:"single"===L?"여러 장 모아보기":"한 장씩 학습하기"}),(0,n.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border border-border bg-card",children:[(0,n.jsx)("span",{className:"text-foreground font-semibold",children:"⭐ Only"}),(0,n.jsx)(o.d,{checked:J,onCheckedChange:e=>{X(e),A(0),z(!1),_(1)}})]})]}),(0,n.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-muted-foreground bg-card/50 border border-border rounded-xl px-4 py-3",children:(0,n.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,n.jsxs)("li",{children:["설정 패널에서 변경한 ",(0,n.jsx)("b",{children:"TTS Voice"}),"와 ",(0,n.jsx)("b",{children:"Font"}),"는 즉시 적용됩니다. (브라우저에 저장)"]}),(0,n.jsxs)("li",{children:["키보드: ",(0,n.jsx)("kbd",{children:"Enter"})," 카드 뒤집기, ",(0,n.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})})]})}},2316:(e,t,a)=>{Promise.resolve().then(a.bind(a,2271))}},e=>{e.O(0,[2992,7811,5707,2549,663,9765,6525,1940,8441,1255,7358],()=>e(e.s=2316)),_N_E=e.O()}]);