(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{2271:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(5155),n=s(2115),l=s(9070),i=s(7325),r=s(8324),c=s(2171),d=s(4643),o=s(8569),h=s(5511),x=s(391),m=s(7288),u=s(5167),g=s(5577),p=s(509),w=s(1215);let f=e=>e.replace(/[\u30A1-\u30F6]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),j=w.X.map(e=>({...e,id:e.id+1e4,katakana:f(e.katakana),furigana:e.furigana,answer:f(e.answer)}));var k=s(7627),b=s(5246),v=s(8565),y=s(1206),N=s(6401),S=s(6031);let C={gojuon:"50음도",dakuten:"탁음",handakuten:"반탁음",yoon:"요음"};function M(){var e;let t="hiragana-chars",{user:s}=(0,l.A)(),{open:w}=(0,i.X)(),{deck:f,favs:M,toggleFav:F,shuffleDeck:T,resetDeckToInitial:E}=(0,k.c)({user:s,deckType:t,initialDeck:j}),[A,D]=(0,n.useState)(0),[z,L]=(0,n.useState)(!1),[O,P]=(0,n.useState)("single"),[_,R]=(0,n.useState)(1),[V,$]=(0,n.useState)({}),[H,J]=(0,n.useState)(!1),[X,q]=(0,n.useState)(!1),[I,W]=(0,n.useState)("Noto Sans JP"),[Z,B]=(0,n.useState)(96),[G,K]=(0,n.useState)({gojuon:!0,dakuten:!0,handakuten:!1,yoon:!1}),Q=(0,n.useMemo)(()=>new Map(j.map(e=>[e.id,e.type])),[j]),U=(0,n.useMemo)(()=>new Set(Object.keys(G).filter(e=>G[e])),[G]),Y=(0,n.useMemo)(()=>{let e=U.size>0?f.filter(e=>{let t=Q.get(e.id);return!!t&&U.has(t)}):[];return X?e.filter(e=>M[e.id]):e},[f,M,X,U,Q]),{currentCards:ee,totalPages:et}=(0,n.useMemo)(()=>{let e=Math.ceil(Y.length/10)||1,t=(_-1)*10;return{currentCards:Y.slice(t,t+10),totalPages:e}},[_,Y]),es=(0,n.useCallback)(()=>L(e=>!e),[]),ea=(0,n.useCallback)(()=>{D(e=>(e+1)%Math.max(1,Y.length)),L(!1)},[Y.length]),en=(0,n.useCallback)(()=>{D(e=>(e-1+Math.max(1,Y.length))%Math.max(1,Y.length)),L(!1)},[Y.length]),el=()=>{E(),D(0),L(!1),$({}),R(1)},{isSupported:ei,ready:er,speakJa:ec,selectedVoice:ed,voices:eo,selectVoice:eh,isSafari:ex}=(0,b.Z)(),em=(0,n.useMemo)(()=>v.y[I]||v.y["Noto Sans JP"],[I]),eu=null!=(e=Y[A])?e:null,eg=(0,n.useCallback)(e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||"single"===O&&("Enter"===e.key||" "===e.key?(e.preventDefault(),es()):"ArrowRight"===e.key?ea():"ArrowLeft"===e.key&&en())},[O,es,ea,en]);(0,n.useEffect)(()=>(window.addEventListener("keydown",eg),()=>window.removeEventListener("keydown",eg)),[eg]);let ep=(0,S.q)()&&"speechSynthesis"in window;return(0,a.jsxs)("div",{className:"w-full min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-800 text-white flex flex-col items-center p-6",style:{fontFamily:em},children:[(0,a.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,a.jsx)(g.R,{name:null==s?void 0:s.nickname,subject:N.a[t]})}),!s&&(0,a.jsx)(p.c,{onLoginClick:()=>w("login")}),"single"===O&&(0,a.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,a.jsxs)("span",{className:"text-white/70",children:["⚡진행률 : ",Y.length?"".concat(Math.min(A+1,Y.length)," / ").concat(Y.length):"0 / 0"]}),ep&&(0,a.jsx)(c.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover-bg-white/10",onClick:()=>ec((null==eu?void 0:eu.katakana)||""),disabled:!er||!eu,children:"\uD83D\uDD0A 듣기 (히라가나)"}),(0,a.jsx)(c.$,{size:"sm",variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>J(!0),"aria-haspopup":"dialog","aria-expanded":H,title:"설정",children:"⚙️ 설정"}),(0,a.jsx)(r.g,{open:H,onOpenChange:J,user:s,deckType:t,isTtsSupported:ei,selectedVoice:ed,selectVoice:eh,voices:eo,isSafari:ex,fontFamily:I,setFontFamily:W,wordFontSize:Z,setWordFontSize:B,resetDeck:el})]}),(0,a.jsx)("div",{className:"w-full max-w-md mx-auto mb-4 p-3 bg-slate-800/50 rounded-lg flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-sm",children:Object.keys(C).map(e=>(0,a.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,a.jsx)(o.S,{id:e,checked:G[e],onCheckedChange:()=>K(t=>({...t,[e]:!t[e]}))}),(0,a.jsx)("span",{children:C[e]})]},e))}),(0,a.jsx)("main",{className:"w-full max-w-5xl select-none",children:"single"===O?0===Y.length?(0,a.jsx)(h.y,{viewMode:"single"}):eu&&(0,a.jsx)(x.g,{card:eu,deckType:t,isFlipped:z,isFav:!!M[eu.id],onFlip:es,onToggleFav:()=>F(eu.id),fontSize:Z},eu.id):(0,a.jsx)(a.Fragment,{children:0===Y.length?(0,a.jsx)(h.y,{viewMode:"grid"}):(0,a.jsx)(m.o,{variant:"chars",cards:ee,favs:M,flippedStates:V,onToggleFav:e=>F(e),onToggleCardFlip:e=>$(t=>({...t,[e]:!t[e]})),page:{current:_,total:et,onPrev:()=>R(e=>Math.max(e-1,1)),onNext:()=>R(e=>Math.min(e+1,et))}})})}),"single"===O&&(0,a.jsx)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2 text-sm",children:(0,a.jsx)(u.A,{onPrev:en,onNext:ea,onShuffle:()=>{T(),D(0),L(!1)},onReset:el})}),(0,a.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[s&&(0,a.jsx)(c.$,{variant:"outline",className:"border-white/10 bg-white/5 hover:bg-white/10",onClick:()=>{P(e=>"single"===e?"grid":"single"),L(!1)},children:"single"===O?"여러 장 모아보기":"한 장씩 학습하기"}),(0,a.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border border-white/10 bg-white/5",children:[(0,a.jsx)("span",{className:"text-white/80 font-semibold",children:"⭐ Only"}),(0,a.jsx)(d.d,{checked:X,onCheckedChange:e=>{q(e),D(0),L(!1),R(1)}})]})]}),(0,a.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-white/70 bg-white/5 rounded-xl px-4 py-3",children:(0,a.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,a.jsxs)("li",{children:["설정 패널에서 변경한 ",(0,a.jsx)("b",{children:"TTS Voice"}),"와 ",(0,a.jsx)("b",{children:"Font"}),"는 즉시 적용됩니다. (브라우저에 저장)"]}),(0,a.jsxs)("li",{children:["키보드: ",(0,a.jsx)("kbd",{children:"Enter"})," 카드 뒤집기, ",(0,a.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})}),(0,a.jsx)("div",{className:"mt-4 text-center",children:(0,a.jsxs)("span",{className:"text-white/40 text-xs",children:["히라가나 공부 v",y.h]})})]})}},2316:(e,t,s)=>{Promise.resolve().then(s.bind(s,2271))}},e=>{e.O(0,[135,965,398,707,663,765,921,754,441,255,358],()=>e(e.s=2316)),_N_E=e.O()}]);