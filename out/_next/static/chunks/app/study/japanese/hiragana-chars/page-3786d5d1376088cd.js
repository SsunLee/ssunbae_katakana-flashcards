(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[152],{2271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>M});var s=a(5155),n=a(2115),l=a(9070),i=a(7325),r=a(8324),d=a(2171),o=a(4643),c=a(4342),u=a(5511),x=a(391),m=a(7288),h=a(5167),g=a(5577),p=a(509),f=a(1215);let j=e=>e.replace(/[\u30A1-\u30F6]/g,e=>String.fromCharCode(e.charCodeAt(0)-96)),k=f.X.map(e=>({...e,id:e.id+1e4,katakana:j(e.katakana),furigana:e.furigana,answer:j(e.answer)}));var b=a(7627),w=a(5246),y=a(8565),v=a(1206),S=a(6401),N=a(6031);let C={gojuon:"50음도",dakuten:"탁음",handakuten:"반탁음",yoon:"요음"};function M(){var e;let t="hiragana-chars",{user:a}=(0,l.A)(),{open:f}=(0,i.X)(),{deck:j,favs:M,toggleFav:F,shuffleDeck:T,resetDeckToInitial:E}=(0,b.c)({user:a,deckType:t,initialDeck:k}),[A,D]=(0,n.useState)(0),[z,L]=(0,n.useState)(!1),[O,P]=(0,n.useState)("single"),[_,R]=(0,n.useState)(1),[V,$]=(0,n.useState)({}),[H,J]=(0,n.useState)(!1),[X,q]=(0,n.useState)(!1),[I,W]=(0,n.useState)("Noto Sans JP"),[Z,B]=(0,n.useState)(96),[G,K]=(0,n.useState)({gojuon:!0,dakuten:!0,handakuten:!1,yoon:!1}),Q=(0,n.useMemo)(()=>new Map(k.map(e=>[e.id,e.type])),[k]),U=(0,n.useMemo)(()=>new Set(Object.keys(G).filter(e=>G[e])),[G]),Y=(0,n.useMemo)(()=>{let e=U.size>0?j.filter(e=>{let t=Q.get(e.id);return!!t&&U.has(t)}):[];return X?e.filter(e=>M[e.id]):e},[j,M,X,U,Q]),{currentCards:ee,totalPages:et}=(0,n.useMemo)(()=>{let e=Math.ceil(Y.length/10)||1,t=(_-1)*10;return{currentCards:Y.slice(t,t+10),totalPages:e}},[_,Y]),ea=(0,n.useCallback)(()=>L(e=>!e),[]),es=(0,n.useCallback)(()=>{D(e=>(e+1)%Math.max(1,Y.length)),L(!1)},[Y.length]),en=(0,n.useCallback)(()=>{D(e=>(e-1+Math.max(1,Y.length))%Math.max(1,Y.length)),L(!1)},[Y.length]),el=()=>{E(),D(0),L(!1),$({}),R(1)},{isSupported:ei,ready:er,speakJa:ed,selectedVoice:eo,voices:ec,selectVoice:eu,isSafari:ex}=(0,w.Z)(),em=(0,n.useMemo)(()=>y.y[I]||y.y["Noto Sans JP"],[I]),eh=null!=(e=Y[A])?e:null,eg=(0,n.useCallback)(e=>{e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||"single"===O&&("Enter"===e.key||" "===e.key?(e.preventDefault(),ea()):"ArrowRight"===e.key?es():"ArrowLeft"===e.key&&en())},[O,ea,es,en]);(0,n.useEffect)(()=>(window.addEventListener("keydown",eg),()=>window.removeEventListener("keydown",eg)),[eg]);let ep=(0,N.q)()&&"speechSynthesis"in window;return(0,s.jsxs)("div",{className:"w-full min-h-screen flex flex-col items-center p-6",style:{fontFamily:em},children:[(0,s.jsx)("header",{className:"w-full max-w-md mx-auto mb-1",children:(0,s.jsx)(g.R,{name:(null==a?void 0:a.nickname)||void 0,subject:S.a[t]})}),!a&&(0,s.jsx)(p.c,{onLoginClick:()=>f("login")}),"single"===O&&(0,s.jsxs)("div",{className:"mb-4 flex w-full max-w-md items-center justify-between text-sm mx-auto",children:[(0,s.jsxs)("span",{className:"text-muted-foreground",children:["⚡진행률 : ",Y.length?"".concat(Math.min(A+1,Y.length)," / ").concat(Y.length):"0 / 0"]}),ep&&(0,s.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>ed((null==eh?void 0:eh.katakana)||""),disabled:!er||!eh,children:"\uD83D\uDD0A 듣기 (히라가나)"}),(0,s.jsx)(d.$,{size:"sm",variant:"outline",onClick:()=>J(!0),"aria-haspopup":"dialog","aria-expanded":H,title:"설정",children:"⚙️ 설정"}),(0,s.jsx)(r.g,{open:H,onOpenChange:J,user:a,deckType:t,isTtsSupported:ei,selectedVoice:eo,selectVoice:eu,voices:ec,isSafari:ex,fontFamily:I,setFontFamily:W,wordFontSize:Z,setWordFontSize:B,resetDeck:el})]}),(0,s.jsx)("div",{className:"w-full max-w-md mx-auto mb-4 p-3 bg-card border border-border rounded-lg flex flex-wrap justify-center items-center gap-x-4 gap-y-2 text-sm",children:Object.keys(C).map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2",children:[(0,s.jsx)(c.S,{id:e,checked:G[e],onCheckedChange:()=>K(t=>({...t,[e]:!t[e]}))}),(0,s.jsx)("span",{children:C[e]})]},e))}),(0,s.jsx)("main",{className:"w-full max-w-5xl select-none",children:"single"===O?0===Y.length?(0,s.jsx)(u.y,{viewMode:"single"}):eh&&(0,s.jsx)(x.g,{card:eh,deckType:t,isFlipped:z,isFav:!!M[eh.id],onFlip:ea,onToggleFav:()=>F(eh.id),fontSize:Z},eh.id):(0,s.jsx)(s.Fragment,{children:0===Y.length?(0,s.jsx)(u.y,{viewMode:"grid"}):(0,s.jsx)(m.o,{variant:"chars",cards:ee,favs:M,flippedStates:V,onToggleFav:e=>F(e),onToggleCardFlip:e=>$(t=>({...t,[e]:!t[e]})),page:{current:_,total:et,onPrev:()=>R(e=>Math.max(e-1,1)),onNext:()=>R(e=>Math.min(e+1,et))}})})}),"single"===O&&(0,s.jsx)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-2 text-sm",children:(0,s.jsx)(h.A,{onPrev:en,onNext:es,onShuffle:()=>{T(),D(0),L(!1)},onReset:el})}),(0,s.jsxs)("div",{className:"mt-4 flex flex-wrap items-center justify-center gap-4 text-sm",children:[a&&(0,s.jsx)(d.$,{variant:"outline",onClick:()=>{P(e=>"single"===e?"grid":"single"),L(!1)},children:"single"===O?"여러 장 모아보기":"한 장씩 학습하기"}),(0,s.jsxs)("label",{className:"flex items-center gap-3 px-3 py-2 rounded-xl border border-border bg-card",children:[(0,s.jsx)("span",{className:"text-foreground font-semibold",children:"⭐ Only"}),(0,s.jsx)(o.d,{checked:X,onCheckedChange:e=>{q(e),D(0),L(!1),R(1)}})]})]}),(0,s.jsx)("footer",{className:"w-full max-w-md mx-auto mt-6 text-sm text-muted-foreground bg-card/50 border border-border rounded-xl px-4 py-3",children:(0,s.jsxs)("ul",{className:"list-disc list-outside pl-6 space-y-1 leading-relaxed",children:[(0,s.jsxs)("li",{children:["설정 패널에서 변경한 ",(0,s.jsx)("b",{children:"TTS Voice"}),"와 ",(0,s.jsx)("b",{children:"Font"}),"는 즉시 적용됩니다. (브라우저에 저장)"]}),(0,s.jsxs)("li",{children:["키보드: ",(0,s.jsx)("kbd",{children:"Enter"})," 카드 뒤집기, ",(0,s.jsx)("kbd",{children:"←/→"})," 이전/다음"]})]})}),(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsxs)("span",{className:"text-muted-foreground/60 text-xs",children:["히라가나 공부 v",v.h]})})]})}},2316:(e,t,a)=>{Promise.resolve().then(a.bind(a,2271))}},e=>{e.O(0,[992,811,549,707,663,765,779,867,441,255,358],()=>e(e.s=2316)),_N_E=e.O()}]);